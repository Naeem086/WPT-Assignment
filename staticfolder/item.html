<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://code.jquery.com/jquery-3.6.0.js"
        integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
    <script>
        $(() => {
            $("#id").blur(() => {
                let input = { itemno: $("#id").val() };
                let contactserver = {
                    data: input,
                    url: "http://localhost:800/select",
                    type: 'get',
                    dataType: 'json',
                    success: (data) => {
                        if (data) {
                            $("#msg").text("Item Matched..!");
                        } else {
                            $("#msg").text("Item not found..!");
                        }
                    },
                    error: (data) => {
                        console.log("Something goes wrong...!");
                    }
                }
                $.ajax(contactserver);
            });

            $("#update").click(() => {
                console.log("Fined..!");
                let input = { itemno: $("#id").val(), itemname: $("#name").val(), itemprice: $("#price").val(), itemcategory: $("#cat").val() };
                let contactserver = {
                    data: input,
                    url: "http://localhost:800/update",
                    type: 'get',
                    dataType: 'json',
                    success: (data) => {
                        if (data)
                            $("#msg").text("Update Successfull");
                        else
                            $("#msg").text("Update Failed !");
                    },
                    error: (data) => {
                        console.log("Something goes wrong...!");
                    }
                }
                $.ajax(contactserver);
            });

            $("#add").click(() => {
                let input = { itemno: $("#id").val(), itemname: $("#name").val(), itemprice: $("#price").val(), itemcategory: $("#cat").val() };
                let contactserver = {
                    data: input,
                    url: "http://localhost:800/insert",
                    type: 'get',
                    dataType: 'json',
                    success: (data) => {
                        if (data)
                            $("#msg").text("Insert Successfull");
                        else
                            $("#msg").text("Insert Failed !");
                    },
                    error: (data) => {
                        console.log("Something goes wrong...!");
                    }
                }
                $.ajax(contactserver);
            });
        });
    </script>
</head>

<body>
    <h1> Assignment 2nd - Item Price </h1>
    Item No.: <input type="text" placeholder="Enter item number" id="id" name="itemno"> <span id="msg"> Message </span>
    <br> <br>
    Item Name : <input type="text" placeholder="Item Name" id="name" name="itemname"> <br><br>
    Item Price : <input type="text" placeholder="Item Price" id="price" name="itemprice"> <br><br>
    Item Category : <input type="text" placeholder="Category" id="cat" name="itemcategory"><br><br>
    <input type="button" id="update" value="Update"> <input type="button" id="add" value="Insert">

</body>

</html>